{"version":3,"sources":["turbopack:///[project]/app/components/products/Testimonials.tsx"],"sourcesContent":["\"use client\";\n\nimport React, { useState, useEffect, useRef, useCallback } from \"react\";\nimport { ChevronLeft, ChevronRight } from \"lucide-react\";\nimport useHorizontalScroll from \"@/app/hooks/useHorizontalScroll\";\nimport LiteYouTubeEmbed from \"react-lite-youtube-embed\";\nimport \"react-lite-youtube-embed/dist/LiteYouTubeEmbed.css\";\n\ninterface Review {\n  id: number;\n  src: string;\n}\n\ninterface ReviewsProps {\n  reviewsData: Review[];\n}\n\nfunction Testimonials({ reviewsData }: ReviewsProps) {\n  const { scroll, scrollRef } = useHorizontalScroll();\n\n  const [currentIndex, setCurrentIndex] = useState<number>(0);\n  const [touchStart, setTouchStart] = useState<number>(0);\n  const [touchEnd, setTouchEnd] = useState<number>(0);\n  const [isDragging, setIsDragging] = useState<boolean>(false);\n  const [dragOffset, setDragOffset] = useState<number>(0);\n  const [isVideoPlaying, setIsVideoPlaying] = useState<boolean>(false);\n  const autoPlayRef = useRef<NodeJS.Timeout | null>(null);\n\n  const reviews = reviewsData;\n\n  // Single ref for scroll animation\n  const containerRef = useRef<HTMLDivElement>(null);\n  const [isVisible, setIsVisible] = useState<boolean>(false);\n\n  // Minimum swipe distance (in px) to trigger slide change\n  const minSwipeDistance = 50;\n\n  // Auto-play functionality\n  const stopAutoPlay = useCallback(() => {\n    if (autoPlayRef.current) {\n      clearInterval(autoPlayRef.current);\n    }\n  }, []);\n\n  const startAutoPlay = useCallback(() => {\n    autoPlayRef.current = setInterval(() => {\n      setCurrentIndex((prev) => (prev + 1) % reviews.length);\n    }, 3000);\n  }, [reviews.length]);\n\n  useEffect(() => {\n    if (!isVideoPlaying) {\n      startAutoPlay();\n    }\n    return () => stopAutoPlay();\n  }, [isVideoPlaying, startAutoPlay, stopAutoPlay]);\n\n  useEffect(() => {\n    const observer = new IntersectionObserver(\n      (entries) => {\n        entries.forEach((entry) => {\n          if (entry.isIntersecting) {\n            setIsVisible(true);\n          }\n        });\n      },\n      {\n        threshold: 0.1,\n        rootMargin: \"0px\",\n      },\n    );\n\n    const currentRef = containerRef.current;\n    if (currentRef) {\n      observer.observe(currentRef);\n    }\n\n    return () => {\n      if (currentRef) {\n        observer.unobserve(currentRef);\n      }\n    };\n  }, []);\n\n  const ReviewCard = ({ review }: { review: { id: number; src: string } }) => {\n    // Extract YouTube video ID from URL\n    const getVideoId = (url: string) => {\n      const videoIdMatch = url.match(\n        /(?:youtu\\.be\\/|youtube\\.com\\/(?:embed\\/|v\\/|watch\\?v=|watch\\?.+&v=))([^?&\"'>]+)/,\n      );\n      return videoIdMatch ? videoIdMatch[1] : \"\";\n    };\n\n    const handleVideoClick = () => {\n      setIsVideoPlaying(true);\n      stopAutoPlay();\n    };\n\n    return (\n      <div\n        className=\" rounded-2xl w-full aspect-video relative overflow-hidden\"\n        onClick={handleVideoClick}\n      >\n        <LiteYouTubeEmbed\n          id={getVideoId(review.src)}\n          title=\"YouTube video\"\n          poster=\"maxresdefault\"\n          webp={true}\n          activatedClass=\"lty-activated\"\n          lazyLoad={true}\n        />\n      </div>\n    );\n  };\n\n  const onTouchStart = (e: React.TouchEvent<HTMLDivElement>) => {\n    stopAutoPlay();\n    setTouchEnd(0);\n    setTouchStart(e.targetTouches[0].clientX);\n    setIsDragging(true);\n  };\n\n  const onTouchMove = (e: React.TouchEvent<HTMLDivElement>) => {\n    const currentTouch = e.targetTouches[0].clientX;\n    setTouchEnd(currentTouch);\n\n    // Calculate drag offset for visual feedback\n    const offset = currentTouch - touchStart;\n    setDragOffset(offset);\n  };\n\n  const onTouchEnd = () => {\n    setIsDragging(false);\n    setDragOffset(0);\n\n    if (!touchStart || !touchEnd) {\n      startAutoPlay();\n      return;\n    }\n\n    const distance = touchStart - touchEnd;\n    const isLeftSwipe = distance > minSwipeDistance;\n    const isRightSwipe = distance < -minSwipeDistance;\n\n    if (isLeftSwipe) {\n      setCurrentIndex((prev) => (prev + 1) % reviews.length);\n    }\n\n    if (isRightSwipe) {\n      setCurrentIndex((prev) => (prev - 1 + reviews.length) % reviews.length);\n    }\n\n    // Restart auto-play after swipe\n    startAutoPlay();\n  };\n\n  const prevSlide = () => {\n    stopAutoPlay();\n    setCurrentIndex((prev) => (prev - 1 + reviews.length) % reviews.length);\n    startAutoPlay();\n  };\n\n  const nextSlide = () => {\n    stopAutoPlay();\n    setCurrentIndex((prev) => (prev + 1) % reviews.length);\n    startAutoPlay();\n  };\n\n  return (\n    <div\n      ref={containerRef}\n      className=\"text-white w-full mx-auto md:m-0 md:contain-none px-6 pb-12 md:p-0 md:px-16 md:pr-0 bg-primary\"\n    >\n      {/* Heading with fade-in from left animation */}\n      <div\n        className={`transition-all duration-700 ease-out ${\n          isVisible ? \"opacity-100 translate-y-0\" : \"opacity-0 -translate-y-12\"\n        }`}\n      >\n        <h6 className=\"text-2xl\">What</h6>\n        <h6 className=\"text-xl md:text-2xl pb-1\">\n          <span className=\"font-bold text-4xl sm:text-3xl italic\">\n            Living Uplife\n          </span>{\" \"}\n          <span className=\"block text-right sm:text-left sm:inline text-2xl sm:text-inherit\">\n            Looks Like\n          </span>\n        </h6>\n      </div>\n\n      {/* Mobile Carousel with Swipe - visible below md breakpoint */}\n      <div\n        className={`md:hidden mt-12 relative transition-all duration-700 ease-out ${\n          isVisible ? \"opacity-100 translate-x-0\" : \"opacity-0 translate-x-12\"\n        }`}\n      >\n        <div className=\"relative overflow-hidden\">\n          <div\n            className={`flex ${\n              isDragging ? \"\" : \"transition-transform duration-500 ease-in-out\"\n            }`}\n            style={{\n              transform: `translateX(calc(-${\n                currentIndex * 100\n              }% + ${dragOffset}px))`,\n            }}\n            onTouchStart={onTouchStart}\n            onTouchMove={onTouchMove}\n            onTouchEnd={onTouchEnd}\n          >\n            {reviews.map((review) => (\n              <div key={review.id} className=\"flex-shrink-0 w-full\">\n                <ReviewCard review={review} />\n              </div>\n            ))}\n          </div>\n\n          {/* Navigation Arrows */}\n          <button\n            onClick={prevSlide}\n            className=\"absolute left-0 top-1/2 -translate-y-1/2 bg-white/30 p-2 rounded-full shadow-lg hover:bg-white transition-colors z-10\"\n            aria-label=\"Previous review\"\n          >\n            <ChevronLeft className=\"w-6 h-6 text-black\" />\n          </button>\n          <button\n            onClick={nextSlide}\n            className=\"absolute right-0 top-1/2 -translate-y-1/2 bg-white/30 p-2 rounded-full shadow-lg hover:bg-white transition-colors z-10\"\n            aria-label=\"Next review\"\n          >\n            <ChevronRight className=\"w-6 h-6 text-black\" />\n          </button>\n        </div>\n\n        {/* Carousel Indicators */}\n        <div className=\"flex justify-center gap-2 mt-12\">\n          {reviews.map((review, index) => (\n            <button\n              key={review.id}\n              onClick={() => {\n                stopAutoPlay();\n                setCurrentIndex(index);\n                startAutoPlay();\n              }}\n              className={`w-2 h-2 rounded-full transition-all ${\n                currentIndex === index ? \"bg-white w-6\" : \"bg-white/40\"\n              }`}\n              aria-label={`Go to slide ${index + 1}`}\n            />\n          ))}\n        </div>\n      </div>\n\n      {/* cards  - visible at md breakpoint and above */}\n      <div className={`hidden relative md:block w-full `}>\n        <div\n          className={`hidden md:grid grid-rows-1 grid-flow-col auto-cols-[30%] gap-5 mt-12 md:pr-16\n         overflow-x-auto justify-between overflow-y-visible scroll-smooth scrollbar-hide\n         transition-all duration-700 ease-out  ${\n           isVisible ? \"opacity-100 translate-y-0\" : \"opacity-0 translate-y-12\"\n         }`}\n          ref={scrollRef}\n        >\n          {reviews.map((review) => (\n            <ReviewCard key={review.id} review={review} />\n          ))}\n        </div>\n\n        <button\n          onClick={() => scroll(\"left\")}\n          className=\"absolute left-0 top-1/2 -translate-y-1/2 bg-white/30 backdrop-blur-sm p-2 rounded-full shadow-lg hover:bg-white transition-colors z-10\"\n          aria-label=\"Previous review\"\n        >\n          <ChevronLeft className=\"w-6 h-6 text-black\" />\n        </button>\n\n        {/* no right padding that's why right 16 intead of 0 */}\n        <button\n          onClick={() => scroll(\"right\")}\n          className=\"absolute right-16 top-1/2 -translate-y-1/2 bg-white/30 backdrop-blur-sm p-2 rounded-full shadow-lg hover:bg-white transition-colors z-10\"\n          aria-label=\"Next review\"\n        >\n          <ChevronRight className=\"w-6 h-6 text-black\" />\n        </button>\n      </div>\n    </div>\n  );\n}\n\nexport default Testimonials;\n"],"names":[],"mappings":"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"}